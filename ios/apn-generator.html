<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>APN í”„ë¡œíŒŒì¼ ìƒì„±ê¸°</title>
    <style>
      :root {
        color-scheme: light dark;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
        margin: 0;
      }
      .wrap {
        max-width: 720px;
        margin: 0 auto;
        padding: 24px;
      }
      h1 {
        font-size: 22px;
        margin: 0 0 10px;
      }
      p {
        margin: 8px 0;
        line-height: 1.5;
        opacity: 0.9;
      }
      .form-section {
        margin-top: 24px;
      }
      .form-group {
        margin-bottom: 16px;
      }
      label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
        font-size: 14px;
      }
      .label-desc {
        font-size: 12px;
        opacity: 0.75;
        font-weight: 400;
        margin-top: 2px;
      }
      input[type="text"],
      input[type="number"],
      select {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid rgba(127, 127, 127, 0.35);
        border-radius: 12px;
        font-size: 14px;
        font-family: inherit;
        background: transparent;
        box-sizing: border-box;
      }
      input[type="checkbox"] {
        margin-right: 6px;
      }
      .btn {
        display: inline-block;
        padding: 12px 20px;
        border-radius: 12px;
        text-decoration: none;
        border: 1px solid rgba(127, 127, 127, 0.35);
        font-weight: 700;
        font-size: 14px;
        cursor: pointer;
        font-family: inherit;
        background: transparent;
      }
      .btn.primary {
        background: rgba(0, 122, 255, 0.18);
        border-color: rgba(0, 122, 255, 0.4);
      }
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .note {
        margin-top: 18px;
        padding: 12px;
        border-radius: 14px;
        background: rgba(127, 127, 127, 0.12);
        font-size: 14px;
      }
      .note strong {
        display: block;
        margin-bottom: 6px;
      }
      .auth-section {
        border: 1px solid rgba(127, 127, 127, 0.25);
        border-radius: 14px;
        padding: 14px;
        margin-top: 12px;
        background: rgba(0, 0, 0, 0.02);
      }
      @media (prefers-color-scheme: dark) {
        .auth-section {
          background: rgba(255, 255, 255, 0.02);
        }
      }
      footer {
        margin-top: 24px;
        padding-top: 16px;
        border-top: 1px solid rgba(127, 127, 127, 0.15);
        font-size: 12px;
        opacity: 0.7;
        text-align: center;
      }
      .back-link {
        display: inline-block;
        margin-bottom: 16px;
        color: rgba(0, 122, 255, 1);
        text-decoration: none;
        font-size: 14px;
      }
      .back-link:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <a href="./" class="back-link">â† í”„ë¡œíŒŒì¼ ëª©ë¡ìœ¼ë¡œ</a>

      <h1>APN í”„ë¡œíŒŒì¼ ìƒì„±ê¸°</h1>
      <p>
        ëª¨ë°”ì¼ ë°ì´í„° í†µì‹ ì„ ìœ„í•œ APN ì„¤ì • í”„ë¡œíŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. iPhone/iPad
        Safariì—ì„œ ìƒì„± í›„ ë°”ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>

      <div class="note">
        <strong>ğŸ“± ì‚¬ìš© ë°©ë²•</strong>
        1. ì•„ë˜ ì–‘ì‹ì— í†µì‹ ì‚¬ì—ì„œ ì œê³µí•œ APN ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.<br />
        2. "í”„ë¡œíŒŒì¼ ìƒì„±" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ .mobileconfig íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.<br />
        3. ì„¤ì • ì•± â†’ ì¼ë°˜ â†’ VPN ë° ê¸°ê¸° ê´€ë¦¬ì—ì„œ í”„ë¡œíŒŒì¼ì„ ì„¤ì¹˜í•˜ì„¸ìš”.
      </div>

      <form id="apnForm" class="form-section">
        <div class="form-group">
          <label>
            í”„ë¡œíŒŒì¼ ì´ë¦„ *
            <div class="label-desc">ì„¤ì • ì•±ì— í‘œì‹œë  ì´ë¦„ì…ë‹ˆë‹¤.</div>
          </label>
          <input
            type="text"
            id="profileName"
            required
            placeholder="ì˜ˆ: ë‚´ í†µì‹ ì‚¬ LTE ì„¤ì •"
          />
        </div>

        <div class="form-group">
          <label>
            APN ì£¼ì†Œ *
            <div class="label-desc">
              í†µì‹ ì‚¬ì—ì„œ ì œê³µí•œ APN ì£¼ì†Œ (ì˜ˆ: internet.sktelecom.com)
            </div>
          </label>
          <input
            type="text"
            id="apn"
            required
            placeholder="ì˜ˆ: internet.sktelecom.com"
          />
        </div>

        <div class="auth-section">
          <h3 style="margin: 0 0 12px; font-size: 16px">
            ğŸŒ ë„¤íŠ¸ì›Œí¬ ì‹ë³„ì (ì„ íƒì‚¬í•­)
          </h3>
          <p style="font-size: 13px; opacity: 0.8; margin: 0 0 12px">
            MCC/MNCëŠ” í†µì‹ ì‚¬ë¥¼ ì‹ë³„í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤. íŠ¹ì • í†µì‹ ì‚¬ì—ì„œë§Œ ì‚¬ìš©í•˜ë„ë¡
            ì œí•œí•  ë•Œ ì„¤ì •í•©ë‹ˆë‹¤.
          </p>

          <div class="form-group">
            <label>
              MCC (Mobile Country Code)
              <div class="label-desc">
                êµ­ê°€ ì½”ë“œ 3ìë¦¬ (í•œêµ­: 450, ì¼ë³¸: 440, 441)
              </div>
            </label>
            <input
              type="text"
              id="mcc"
              maxlength="3"
              placeholder="ì˜ˆ: 450"
              pattern="[0-9]{3}"
            />
          </div>

          <div class="form-group">
            <label>
              MNC (Mobile Network Code)
              <div class="label-desc">
                í†µì‹ ì‚¬ ì½”ë“œ 2-3ìë¦¬ (SKT: 05, KT: 08, LGU+: 06)
              </div>
            </label>
            <input
              type="text"
              id="mnc"
              maxlength="3"
              placeholder="ì˜ˆ: 05"
              pattern="[0-9]{2,3}"
            />
          </div>
        </div>

        <div class="form-group">
          <label>
            ì‚¬ìš©ì ì´ë¦„ (Username)
            <div class="label-desc">ì„ íƒì‚¬í•­. í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì…ë ¥í•˜ì„¸ìš”.</div>
          </label>
          <input type="text" id="username" placeholder="ì„ íƒì‚¬í•­" />
        </div>

        <div class="form-group">
          <label>
            ë¹„ë°€ë²ˆí˜¸ (Password)
            <div class="label-desc">ì„ íƒì‚¬í•­. í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì…ë ¥í•˜ì„¸ìš”.</div>
          </label>
          <input type="text" id="password" placeholder="ì„ íƒì‚¬í•­" />
        </div>

        <div class="form-group">
          <label>
            í”„ë¡ì‹œ ì„œë²„
            <div class="label-desc">
              ì„ íƒì‚¬í•­. í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë§Œ ì…ë ¥í•˜ì„¸ìš”.
            </div>
          </label>
          <input type="text" id="proxy" placeholder="ì˜ˆ: proxy.example.com" />
        </div>

        <div class="form-group">
          <label>
            í”„ë¡ì‹œ í¬íŠ¸
            <div class="label-desc">í”„ë¡ì‹œ ì„œë²„ì˜ í¬íŠ¸ ë²ˆí˜¸</div>
          </label>
          <input type="number" id="proxyPort" placeholder="ì˜ˆ: 8080" />
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="allowedProtocolMask" checked />
            LTE ì‚¬ìš© í—ˆìš©
          </label>
        </div>

        <div class="auth-section">
          <h3 style="margin: 0 0 12px; font-size: 16px">ğŸ”„ APN ìœ í˜• ì„ íƒ</h3>
          <p style="font-size: 13px; opacity: 0.8; margin: 0 0 12px">
            ì´ APNì„ ì–´ë–¤ ìš©ë„ë¡œ ì‚¬ìš©í• ì§€ ì„ íƒí•˜ì„¸ìš”. ì—¬ëŸ¬ ê°œ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.
          </p>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeDefault" checked />
              Default (ì¼ë°˜ ë°ì´í„° í†µì‹ )
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeMms" />
              MMS (ë©€í‹°ë¯¸ë””ì–´ ë©”ì‹œì§€)
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeSupl" />
              SUPL (ë³´ì¡° ìœ„ì¹˜ ì •ë³´ ì„œë¹„ìŠ¤)
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeDun" />
              DUN (ë‹¤ì´ì–¼ì—… ë„¤íŠ¸ì›Œí‚¹/í…Œë”ë§)
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeIms" />
              IMS (IP ë©€í‹°ë¯¸ë””ì–´ ì„œë¹„ìŠ¤/VoLTE)
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeRcs" />
              RCS (ë¦¬ì¹˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì„œë¹„ìŠ¤)
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeXcap" />
              XCAP (XML ì„¤ì • ì•¡ì„¸ìŠ¤ í”„ë¡œí† ì½œ)
            </label>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="apnTypeCbs" />
              CBS (ì…€ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì„œë¹„ìŠ¤)
            </label>
          </div>
        </div>

        <div class="auth-section">
          <h3 style="margin: 0 0 12px; font-size: 16px">
            ğŸ“¨ MMS ì„¤ì • (ì„ íƒì‚¬í•­)
          </h3>
          <p style="font-size: 13px; opacity: 0.8; margin: 0 0 12px">
            ë¬¸ì ë©”ì‹œì§€ë¡œ ì‚¬ì§„/ë™ì˜ìƒì„ ë³´ë‚´ë ¤ë©´ MMS ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
          </p>

          <div class="form-group">
            <label>
              MMSC (MMS Center URL)
              <div class="label-desc">
                ì˜ˆ: http://mmsc.example.com ë˜ëŠ” http://192.168.1.1/mmsc
              </div>
            </label>
            <input
              type="text"
              id="mmsc"
              placeholder="ì˜ˆ: http://mmsc.ktfwing.com:9082"
            />
          </div>

          <div class="form-group">
            <label>
              MMS Proxy ì„œë²„
              <div class="label-desc">MMS ì „ì†¡ì„ ìœ„í•œ í”„ë¡ì‹œ ì„œë²„ ì£¼ì†Œ</div>
            </label>
            <input
              type="text"
              id="mmsProxy"
              placeholder="ì˜ˆ: mmsproxy.ktfwing.com"
            />
          </div>

          <div class="form-group">
            <label>
              MMS Proxy í¬íŠ¸
              <div class="label-desc">ì¼ë°˜ì ìœ¼ë¡œ 80 ë˜ëŠ” 8080ì„ ì‚¬ìš©í•©ë‹ˆë‹¤</div>
            </label>
            <input type="number" id="mmsProxyPort" placeholder="ì˜ˆ: 80" />
          </div>
        </div>

        <div class="auth-section">
          <div class="form-group">
            <label>
              ì¸ì¦ ìœ í˜•
              <div class="label-desc">
                ëŒ€ë¶€ë¶„ì˜ ê²½ìš° CHAP ë˜ëŠ” PAPì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
              </div>
            </label>
            <select id="authType">
              <option value="CHAP">CHAP (ê¶Œì¥)</option>
              <option value="PAP">PAP</option>
              <option value="None">ì—†ìŒ</option>
            </select>
          </div>
        </div>

        <div class="form-group" style="margin-top: 24px">
          <button type="submit" class="btn primary">
            í”„ë¡œíŒŒì¼ ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
          </button>
        </div>
      </form>

      <div class="note" style="margin-top: 24px">
        <strong>âš ï¸ ì£¼ì˜ì‚¬í•­</strong>
        â€¢ í†µì‹ ì‚¬ì—ì„œ ì œê³µí•œ ì •í™•í•œ APN ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.<br />
        â€¢ ì˜ëª»ëœ ì„¤ì •ì€ ë°ì´í„° í†µì‹ ì´ ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
        â€¢ í”„ë¡œíŒŒì¼ ì‚­ì œëŠ” ì„¤ì • â†’ ì¼ë°˜ â†’ VPN ë° ê¸°ê¸° ê´€ë¦¬ì—ì„œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>

      <footer>
        <p>APN í”„ë¡œíŒŒì¼ ìƒì„±ê¸° Â· 2025</p>
      </footer>
    </div>

    <script>
      const form = document.getElementById("apnForm");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        generateProfile();
      });

      function generateProfile() {
        // í¼ ë°ì´í„° ìˆ˜ì§‘
        const profileName = document.getElementById("profileName").value;
        const apn = document.getElementById("apn").value;
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;
        const proxy = document.getElementById("proxy").value;
        const proxyPort = document.getElementById("proxyPort").value;
        const mcc = document.getElementById("mcc").value;
        const mnc = document.getElementById("mnc").value;
        const mmsc = document.getElementById("mmsc").value;
        const mmsProxy = document.getElementById("mmsProxy").value;
        const mmsProxyPort = document.getElementById("mmsProxyPort").value;
        const allowedProtocolMask = document.getElementById(
          "allowedProtocolMask"
        ).checked;
        const authType = document.getElementById("authType").value;

        // APN ìœ í˜• ìˆ˜ì§‘ ë° ë¹„íŠ¸ë§ˆìŠ¤í¬ ê³„ì‚°
        const apnTypeDefault =
          document.getElementById("apnTypeDefault").checked;
        const apnTypeMms = document.getElementById("apnTypeMms").checked;
        const apnTypeSupl = document.getElementById("apnTypeSupl").checked;
        const apnTypeDun = document.getElementById("apnTypeDun").checked;
        const apnTypeIms = document.getElementById("apnTypeIms").checked;
        const apnTypeRcs = document.getElementById("apnTypeRcs").checked;
        const apnTypeXcap = document.getElementById("apnTypeXcap").checked;
        const apnTypeCbs = document.getElementById("apnTypeCbs").checked;

        let defaultProtocolMask = 0;
        if (apnTypeDefault) defaultProtocolMask |= 1; // Default
        if (apnTypeMms) defaultProtocolMask |= 2; // MMS
        if (apnTypeSupl) defaultProtocolMask |= 4; // SUPL
        if (apnTypeDun) defaultProtocolMask |= 8; // DUN
        if (apnTypeIms) defaultProtocolMask |= 64; // IMS
        if (apnTypeCbs) defaultProtocolMask |= 128; // CBS
        if (apnTypeXcap) defaultProtocolMask |= 512; // XCAP
        if (apnTypeRcs) defaultProtocolMask |= 1024; // RCS

        // UUID ìƒì„± (ê°„ë‹¨í•œ ë²„ì „)
        const uuid = generateUUID();
        const payloadUUID = generateUUID();

        // mobileconfig XML ìƒì„±
        const xml = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>AttachAPN</key>
            <dict>
                <key>Name</key>
                <string>${escapeXml(apn)}</string>
                ${
                  authType !== "None"
                    ? `
                <key>AuthenticationType</key>
                <string>${authType}</string>
                `
                    : ""
                }
                ${
                  username
                    ? `
                <key>Username</key>
                <string>${escapeXml(username)}</string>`
                    : ""
                }
                ${
                  password
                    ? `
                <key>Password</key>
                <string>${escapeXml(password)}</string>`
                    : ""
                }
                    ${
                      proxy
                        ? `
                    <key>ProxyServer</key>
                    <string>${escapeXml(proxy)}</string>`
                        : ""
                    }${
          proxyPort
            ? `
                                <key>ProxyPort</key>
                                <integer>${parseInt(proxyPort)}</integer>`
            : ""
        }${
          allowedProtocolMask
            ? `
                                <key>AllowedProtocolMask</key>
                                <integer>3</integer>`
            : ""
        }${
          defaultProtocolMask > 0
            ? `
                                <key>DefaultProtocolMask</key>
                                <integer>${defaultProtocolMask}</integer>`
            : ""
        }${
          mcc
            ? `
                                <key>MCC</key>
                                <string>${escapeXml(mcc)}</string>`
            : ""
        }${
          mnc
            ? `
                                <key>MNC</key>
                                <string>${escapeXml(mnc)}</string>`
            : ""
        }${
          mmsc
            ? `
                                <key>MMSC</key>
                                <string>${escapeXml(mmsc)}</string>`
            : ""
        }${
          mmsProxy
            ? `
                                <key>MMSProxyServer</key>
                                <string>${escapeXml(mmsProxy)}</string>`
            : ""
        }${
          mmsProxyPort
            ? `
                                <key>MMSProxyPort</key>
                                <integer>${parseInt(mmsProxyPort)}</integer>`
            : ""
        }
            </dict>
            <key>APNs</key>
            <array>
                <dict>
                    <key>Name</key>
                    <string>${escapeXml(apn)}</string>${
          authType === "None"
            ? ""
            : `
                    <key>AuthenticationType</key>
                    <string>${authType}</string>
                    `
        }
            ${
              username
                ? `
                                <key>Username</key>
                                <string>${escapeXml(username)}</string>`
                : ""
            }${
          password
            ? `
                    <key>Password</key>
                    <string>${escapeXml(password)}</string>`
            : ""
        }${
          proxy
            ? `
                    <key>ProxyServer</key>
                    <string>${escapeXml(proxy)}</string>`
            : ""
        }${
          proxyPort
            ? `
                    <key>ProxyPort</key>
                    <integer>${parseInt(proxyPort)}</integer>`
            : ""
        }${
          allowedProtocolMask
            ? `
                    <key>AllowedProtocolMask</key>
                    <integer>3</integer>`
            : ""
        }${
          defaultProtocolMask > 0
            ? `
                    <key>DefaultProtocolMask</key>
                    <integer>${defaultProtocolMask}</integer>`
            : ""
        }${
          mcc
            ? `
                    <key>MCC</key>
                    <string>${escapeXml(mcc)}</string>`
            : ""
        }${
          mnc
            ? `
                    <key>MNC</key>
                    <string>${escapeXml(mnc)}</string>`
            : ""
        }${
          mmsc
            ? `
                    <key>MMSC</key>
                    <string>${escapeXml(mmsc)}</string>`
            : ""
        }${
          mmsProxy
            ? `
                    <key>MMSProxyServer</key>
                    <string>${escapeXml(mmsProxy)}</string>`
            : ""
        }${
          mmsProxyPort
            ? `
                    <key>MMSProxyPort</key>
                    <integer>${parseInt(mmsProxyPort)}</integer>`
            : ""
        }
                </dict>
            </array>
            <key>PayloadDescription</key>
            <string>${escapeXml(profileName)} APN ì„¤ì •</string>
            <key>PayloadDisplayName</key>
            <string>Advanced Settings</string>
            <key>PayloadIdentifier</key>
            <string>com.apn.${payloadUUID}</string>
            <key>PayloadType</key>
            <string>com.apple.cellular</string>
            <key>PayloadUUID</key>
            <string>${payloadUUID}</string>
            <key>PayloadVersion</key>
            <integer>1</integer>
        </dict>
    </array>
    <key>PayloadDisplayName</key>
    <string>${escapeXml(profileName)}</string>
    <key>PayloadIdentifier</key>
    <string>com.apn.profile.${uuid}</string>
    <key>PayloadRemovalDisallowed</key>
    <false/>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadUUID</key>
    <string>${uuid}</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
</dict>
</plist>`;

        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        const blob = new Blob([xml], {
          type: "application/x-apple-aspen-config",
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `${sanitizeFilename(profileName)}.mobileconfig`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        // alert(
        //   "í”„ë¡œíŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì„¤ì • ì•± â†’ ì¼ë°˜ â†’ VPN ë° ê¸°ê¸° ê´€ë¦¬ì—ì„œ ì„¤ì¹˜í•˜ì„¸ìš”."
        // );
      }

      // UUID ìƒì„± í•¨ìˆ˜
      function generateUUID() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
          /[xy]/g,
          function (c) {
            const r = (Math.random() * 16) | 0;
            const v = c === "x" ? r : (r & 0x3) | 0x8;
            return v.toString(16);
          }
        );
      }

      // XML íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„
      function escapeXml(str) {
        return String(str)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&apos;");
      }

      // íŒŒì¼ëª… ì•ˆì „í•˜ê²Œ ë§Œë“¤ê¸°
      function sanitizeFilename(str) {
        return str
          .replace(/[^a-zA-Z0-9ê°€-í£ã„±-ã…ã…-ã…£\s-]/g, "")
          .replace(/\s+/g, "-")
          .substring(0, 50);
      }
    </script>
  </body>
</html>
